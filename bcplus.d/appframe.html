<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BC+ `version`: `title`</title>
    <link rel="stylesheet" href="s/css/bcp.css">
<!-- >>> dyn-styles <<< -->
<!-- >>> title-offline >>> -->
–offline–
<!-- <<< title-offline <<< \-->
<!-- >>> title-online >>> -->
CMDR `cmdr-name`
<!-- <<< title-online <<< \-->
  </head>
  <body>
<!-- >>> body <<< -->
<!-- >>> body-offline >>> -->
    <header style="display:block;" class="center">
	  <h1>…offline…</h1>
	</header>
	<main class="center">
	<img src="s/img/EDLoader.svg" alt="loading…" style="margin-top:5em">
	</main>
<!-- <<< body-offline <<< \-->
<!-- >>> body-online >>> -->
	<header>
	<div id="base">
	<p>CMDR `cmdr-name`<p>
	<p>`credits` €</p>
	<p>`ship-name` / `ship-ident`</p>
	<p>`ship-type`</p>
	</div>
	<div class="rank">
		<img class="logo" src="s/rnk/combat/`rlvl-combat`.png">
		<div><p>Combat: `rnk-combat`</p><p>`rlvl-combat`/8 +`rprg-combat`%</p></div>
	</div>
	<div class="rank">
		<img class="logo" src="s/rnk/trading/`rlvl-trade`.png">
		<div><p>Trading: `rnk-trade`</p><p>`rlvl-trade`/8 +`rprg-trade`%</p></div>
	</div>
	<div class="rank">
		<img class="logo" src="s/rnk/explorer/`rlvl-explorer`.png">
		<div><p>Explorer: `rnk-explorer`</p><p>`rlvl-explorer`/8 +`rprg-explorer`%</p></div>
	</div>
	<div class="rank">
		<img class="logo" src="s/rnk/cqc/`rlvl-cqc`.png">
		<div><p>CQC: `rnk-cqc`</p><p>`rlvl-cqc`/8 +`rprg-cqc`%</p></div>
	</div>
	<div class="locinfo">
		<div><p><pan title="Bookmark – NYI!" onclick="togglebm(this)"
		             style="cursor: pointer"><!--★-->☆</span> `location`</p><p>`locx` / `locy` / `locz`</p></div>
		<div style="margin-left:1em"><p>Home: `home`</p><p>→ `homedist` Ly</p></div>
	</div>
	<div class="rank" style="justify-content: center">
		<img class="logo" src="s/fctn/feds.png" alt="Feds">
		<div><p>Federation: `rlvl-fed`/14</p><p>Master +`rprg-fed`%</p></div>
	</div>
	<div class="rank" style="justify-content: center">
		<img class="logo" src="s/fctn/imps.png" alt="Imps">
		<div><p>Empire: `rlvl-imp`/14</p><p>Master +`rprg-imp`%</p></div>
	</div>
	</header>
	<nav>
	  <ul>
<!-- >>> nav-items <<< \-->
<!-- >>> nav-item >>> -->
		<li><a href="`link`">`title`</a></li>

<!-- <<< nav-item <<< \-->
	  </ul>
	</nav>
	<main>
	<br>
<!-- >>> topic <<< -->
	</main>
<!-- <<< body-online <<< \-->
	<footer id="status">&nbsp;</footer>
	<script>
var statLine = document.getElementById("status");
function showStatus(msg) {
	statLine.innerHTML = msg;
	setTimeout(function(){ statLine.innerHTML = "&nbsp;" }, 10000);
}
var wsurl = "ws://"+location.hostname+":"+location.port+"/ws";
var wsock = new WebSocket(wsurl);
function startWs() {
	// https://www.tutorialspoint.com/html5/html5_websocket.htm
	// .onerror(err); .onopen; .onmessage(msg); .onclose
	/*wsockUpd.onopen = function () {
	   showStatus('Event Channel Connected: '+wsurl);	   	
	}*/
	wsock.onerror = function (err) {
	   showStatus('Event Channel Error: '+err);	   	
	}
	wsock.onclose = function(evt) {
	   showStatus('Event Channel Closed: '+wsurl);
	   setTimeout(startWs(), 1500);
	}
	wsock.onmessage = function(evt) {
		var cmd = JSON.parse(evt.data)
	 	if (cmd.cmd == "reload") {
	   	location.reload(true);
	  	} else {
	     	showStatus('Event: ['+evt.data+']');
	   }
	}	   
}
document.addEventListener('DOMContentLoaded', function () {
	if (window["WebSocket"]) {
		startWs()
	} else {
		alert("Your browser does not support WebSockets.")
	}
})
	</script>
<!-- >>> script-end <<< \-->
  </body>
</html>
